<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Optimizing Linux Boot Time | The Brink || Tech Journal</title>
<meta name="keywords" content="Linux, Optimizations">
<meta name="description" content="Boot your Linux Machine instantly">
<meta name="author" content="ar0177417">
<link rel="canonical" href="https://thebrink.netlify.app/optimizing-boot-time/">
<link crossorigin="anonymous" href="https://thebrink.netlify.app/assets/css/stylesheet.min.76ef7d251488e9b8f7855abee95e94a87071f1cfcec99d9c540581fda3f04864.css" integrity="sha256-du99JRSI6bj3hVq&#43;6V6UqHBx8c/OyZ2cVAWB/aPwSGQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://thebrink.netlify.app/favicon.ico">
<link rel="apple-touch-icon" href="https://thebrink.netlify.app/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="https://thebrink.netlify.app/optimizing-boot-time/">

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-GQLDGQF9G6"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-GQLDGQF9G6');
        }
      </script>
<meta name="twitter:title" content="Optimizing Linux Boot Time | The Brink || Tech Journal" />
<meta name="twitter:description" content="Boot your Linux Machine instantly" />
<meta property="og:title" content="Optimizing Linux Boot Time | The Brink || Tech Journal" />
<meta property="og:description" content="Boot your Linux Machine instantly" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thebrink.netlify.app/optimizing-boot-time/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2023-10-05T17:35:10&#43;05:00" />
  <meta property="article:modified_time" content="2023-10-05T17:35:10&#43;05:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://thebrink.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Optimizing Linux Boot Time",
      "item": "https://thebrink.netlify.app/optimizing-boot-time/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Optimizing Linux Boot Time | The Brink || Tech Journal",
  "name": "Optimizing Linux Boot Time",
  "description": "Boot your Linux Machine instantly",
  "keywords": [
    "Linux", "Optimizations"
  ],
  "wordCount" : "397",
  "inLanguage": "en",
  "datePublished": "2023-10-05T17:35:10+05:00",
  "dateModified": "2023-10-05T17:35:10+05:00",
  "author":{
    "@type": "Person",
    "name": "ar0177417"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://thebrink.netlify.app/optimizing-boot-time/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "The Brink || Tech Journal",
    "logo": {
      "@type": "ImageObject",
      "url": "https://thebrink.netlify.app/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
        try{
            document.getElementById("siteLogo").src = "/images/logo-light.webp";
            }
        catch{}
      document.body.classList.remove('dark');
      break;
    case 'dark':
        try{
            document.getElementById("siteLogo").src = "/images/logo-dark.webp";
      }
      catch{}
      document.body.classList.add('dark');
      break;
    
    default:
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            try{
                document.getElementById("siteLogo").src = "/images/logo-dark.webp";
            }
            catch{}
            document.body.classList.add('dark');
        }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://thebrink.netlify.app/" accesskey="h" title=" (Alt + H)">
                    <img id="siteLogo" src="https://thebrink.netlify.app/images/logo-light.webp" alt="logo" aria-label="logo"
                    height="35">
                    <script>
                        if (isDarkTheme()) {
                            document.getElementById("siteLogo").src = "/images/logo-dark.webp";
                        }
                        else {
                            document.getElementById("siteLogo").src = "/images/logo-light.webp";
                        }
                    </script></a>
                    </div>
        <ul id="menu">
            <li>
                <a href="https://thebrink.netlify.app/search/" title="Search (Alt &#43; /)"data-no-instant accesskey=/
                >Search
                </a>
            </li>
            <li>
                <a href="https://thebrink.netlify.app/categories/" title="Categories"
                >Categories
                </a>
            </li>
            <li>
                <a href="https://thebrink.netlify.app/archives/" title="Archives"
                >Archives
                </a>
            </li>
            <li>
                <a href="https://thebrink.netlify.app/tags/" title="Tags"
                >Tags
                </a>
            </li>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>

        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Optimizing Linux Boot Time</h1>
    <div class="post-description">Boot your Linux Machine instantly</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>October 05, 2023</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select: text;"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="user-select: text;"></path><polyline points="14 2 14 8 20 8" style="user-select: text;"></polyline><line x1="16" y1="13" x2="8" y2="13" style="user-select: text;"></line><line x1="16" y1="17" x2="8" y2="17" style="user-select: text;"></line><polyline points="10 9 9 9 8 9" style="user-select: text;"></polyline></svg>
  <span>397 words</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>2 min</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://thebrink.netlify.app/tags/linux/">Linux</a><a href="https://thebrink.netlify.app/tags/optimizations/">Optimizations</a></span></span>



      
      
    </div>
  </header> <div class="toc side right">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#systemd-optimizations" aria-label="Systemd optimizations">Systemd optimizations</a><ul>
                        
                <li>
                    <a href="#disabling-unnecessary-services" aria-label="Disabling unnecessary services">Disabling unnecessary services</a></li>
                <li>
                    <a href="#using-socket-instead-of-service-for-starting-service" aria-label="Using .socket instead of .service for starting service">Using <code>.socket</code> instead of <code>.service</code> for starting service</a></li></ul>
                </li>
                <li>
                    <a href="#slimming-down-initramfs" aria-label="Slimming Down initramfs">Slimming Down initramfs</a><ul>
                        
                <li>
                    <a href="#mkinitcpio" aria-label="Mkinitcpio">Mkinitcpio</a><ul>
                        
                <li>
                    <a href="#using-systemd-instead-of-busybox-on-early-init" aria-label="Using Systemd instead of Busybox on early init">Using Systemd instead of Busybox on early init</a></li>
                <li>
                    <a href="#removing-unnecessary-hooks" aria-label="Removing Unnecessary Hooks">Removing Unnecessary Hooks</a></li>
                <li>
                    <a href="#using-lz4-compression" aria-label="Using lz4 compression">Using lz4 compression</a></li></ul>
                </li>
                <li>
                    <a href="#switch-to-dracut" aria-label="Switch to Dracut">Switch to Dracut</a></li></ul>
                </li>
                <li>
                    <a href="#using-alternative-init-system-not-recommended-for-beginners" aria-label="Using Alternative Init System (Not recommended for beginners)">Using Alternative Init System <font size="2">(Not recommended for beginners)</font></a></li>
                <li>
                    <a href="#disable-splash" aria-label="Disable Splash">Disable Splash</a></li>
                <li>
                    <a href="#disable-terminal-output" aria-label="Disable Terminal Output">Disable Terminal Output</a></li>
                <li>
                    <a href="#staggered-spin-up-on-hdd" aria-label="Staggered Spin-up on HDD">Staggered Spin-up on HDD</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Boot time is how much time it takes to boot your computer when you press your power button. A lot of things can slow down your boot on Linux. In this article we will discuss this in detail.</p>
<h2 id="systemd-optimizations">Systemd optimizations<a hidden class="anchor" aria-hidden="true" href="#systemd-optimizations">¶</a></h2>
<h3 id="disabling-unnecessary-services">Disabling unnecessary services<a hidden class="anchor" aria-hidden="true" href="#disabling-unnecessary-services">¶</a></h3>
<p><code>systemd-analyze</code> is a command available on systemd distros (which most distros are). It shows which service is using more time to load and you can disable that service. Just don&rsquo;t disable any important service or your computer won&rsquo;t boot at all.<br>
You can also use the sub-command <code>systemd-analyze blame</code> for more clearer output.</p>
<h3 id="using-socket-instead-of-service-for-starting-service">Using <code>.socket</code> instead of <code>.service</code> for starting service<a hidden class="anchor" aria-hidden="true" href="#using-socket-instead-of-service-for-starting-service">¶</a></h3>
<p><code>.socket</code> are used to initiate the service process when its needed while <code>.service</code> starts the process on boot which costs boot time and unnecessary for services like <code>cups</code></p>
<h2 id="slimming-down-initramfs">Slimming Down initramfs<a hidden class="anchor" aria-hidden="true" href="#slimming-down-initramfs">¶</a></h2>
<h3 id="mkinitcpio">Mkinitcpio<a hidden class="anchor" aria-hidden="true" href="#mkinitcpio">¶</a></h3>
<h4 id="using-systemd-instead-of-busybox-on-early-init">Using Systemd instead of Busybox on early init<a hidden class="anchor" aria-hidden="true" href="#using-systemd-instead-of-busybox-on-early-init">¶</a></h4>
<p>By default, the Mkinitcpio configuration uses the <code>base</code> and <code>udev</code> hooks for building the initramfs. Faster boot times can be achieved by replacing them with systemd</p>
<h4 id="removing-unnecessary-hooks">Removing Unnecessary Hooks<a hidden class="anchor" aria-hidden="true" href="#removing-unnecessary-hooks">¶</a></h4>
<p>Use <code>autodetect</code> hook for initramfs which auto detects the require hooks</p>
<h4 id="using-lz4-compression">Using lz4 compression<a hidden class="anchor" aria-hidden="true" href="#using-lz4-compression">¶</a></h4>
<p>lz4 compression is slightly faster than zstd or gzip compressions. You can change this in <code>/etc/mkinitcpio.conf</code></p>
<h3 id="switch-to-dracut">Switch to Dracut<a hidden class="anchor" aria-hidden="true" href="#switch-to-dracut">¶</a></h3>
<p>Dracut can generate unified kernel images with smaller size if configured correctly. This allows faster kernel loading.</p>
<h2 id="using-alternative-init-system-not-recommended-for-beginners">Using Alternative Init System <font size="2">(Not recommended for beginners)</font><a hidden class="anchor" aria-hidden="true" href="#using-alternative-init-system-not-recommended-for-beginners">¶</a></h2>
<p>Systemd started as an init manager but now has absorbed many services and processes. Other init systems such as runit,dinit,s6,etc. are much lighter and allows much faster boot time than systemd</p>
<h2 id="disable-splash">Disable Splash<a hidden class="anchor" aria-hidden="true" href="#disable-splash">¶</a></h2>
<p>Disabling <strong>Bios Splash and Plymouth Splash</strong> can also speed up the boot because splash adds a delay in boot</p>
<h2 id="disable-terminal-output">Disable Terminal Output<a hidden class="anchor" aria-hidden="true" href="#disable-terminal-output">¶</a></h2>
<p>On some fast systems using SSDs, The tty could also be a bottlneck meaning lesser the terminal output faster will be the boot.</p>
<h2 id="staggered-spin-up-on-hdd">Staggered Spin-up on HDD<a hidden class="anchor" aria-hidden="true" href="#staggered-spin-up-on-hdd">¶</a></h2>
<p>On HDDs staggered spin can also be a problem but it can be fixed by checking dmesg output,i.e, <code>sudo dmesg | grep SSS</code>.<br>
If there is output of this command, then add <code>libahci.ignore_sss=1</code> to kernel parameters.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">¶</a></h2>
<p>This is barely scratching the surface in terms of optimization. You can always do some more optimization. Linux is already way faster than Windows and lighter in terms of resource usage. Then on top of that you can optimize it more to get <strong>single digit boot times!</strong></p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://thebrink.netlify.app/shenanigan-free-windows-installation/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Installing Windows Using Only CMD</span>
  </a>
  <a class="next" href="https://thebrink.netlify.app/making-a-real-smart-tv/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>The Problem With Smart Televisions</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2025 <a href="https://thebrink.netlify.app/">The Brink</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="https://thebrink.netlify.app/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>

</body>

</html>
